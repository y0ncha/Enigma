{
  "info": {
    "_postman_id": "25c74ff9-2476-4fc6-8b0d-ab91b1e1ce2c",
    "name": "Enigma API - Sanity",
    "description": "API for the Enigma project.\n- Base URL: http://localhost:8080\n- No authentication or authorization required\n- All endpoints are prefixed with `/enigma`\n",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Sanity load small machine (ex3-sanity-small.xml)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "de8606e6-867c-4a02-9a34-3bc2248767f0",
            "exec": [
              "let jsonData = null;",
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "pm.test(\"Load response is JSON\", function () {",
              "    jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an(\"object\");",
              "});",
              "pm.collectionVariables.set(\"machineNamePaper\", (jsonData && jsonData.name) ? jsonData.name : (pm.collectionVariables.get(\"machineNamePaper\") || \"paper-enigma\"));"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "b5e5fd2c-b2e1-4433-a638-af722faffcdb",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "6c15cc23-a789-4123-9d08-70d2a90c6ed1",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "contentType": "",
              "src": [
                "postman-cloud:///1f108e8f-a7e9-42b0-9b83-235b0d554d85"
              ]
            }
          ]
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/load",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "load"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity load paper machine (ex3-sanity-paper-enigma.xml)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "cc0913c9-b8fc-461b-ace6-b3ca5482a9fe",
            "exec": [
              "let jsonData = null;",
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "pm.test(\"Load response is JSON\", function () {",
              "    jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an(\"object\");",
              "});",
              "pm.collectionVariables.set(\"machineNamePaper\", (jsonData && jsonData.name) ? jsonData.name : (pm.collectionVariables.get(\"machineNamePaper\") || \"paper-enigma\"));"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "3c70fd14-4fdf-4c60-a900-d2b93eac411c",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "af543ad3-8392-4db9-9ea5-aa12bef8c341",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "contentType": "",
              "src": [
                "postman-cloud:///1f108e90-3730-4db0-8a8b-77ab43cdd83c"
              ]
            }
          ]
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/load",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "load"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity create session - paper #1",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "const machineName = pm.collectionVariables.get(\"machineNamePaper\") || \"paper-enigma\";",
              "pm.collectionVariables.set(\"machineNamePaper\", machineName);"
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "const jsonData = pm.response.json();",
              "pm.test(\"Session response has sessionID\", function () {",
              "    pm.expect(jsonData.sessionID).to.be.a(\"string\").and.not.empty;",
              "});",
              "pm.collectionVariables.set(\"sanityPaperSessionId1\", jsonData.sessionID);"
            ]
          }
        }
      ],
      "id": "e4e5009b-cc83-4ce7-823c-a4b0d3e08cf5",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"machine\": \"{{machineNamePaper}}\"\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/session",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "session"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity create session - paper #2",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "const machineName = pm.collectionVariables.get(\"machineNamePaper\") || \"paper-enigma\";",
              "pm.collectionVariables.set(\"machineNamePaper\", machineName);"
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "const jsonData = pm.response.json();",
              "pm.test(\"Session response has sessionID\", function () {",
              "    pm.expect(jsonData.sessionID).to.be.a(\"string\").and.not.empty;",
              "});",
              "pm.collectionVariables.set(\"sanityPaperSessionId2\", jsonData.sessionID);"
            ]
          }
        }
      ],
      "id": "a604e072-b353-4cb0-a37c-184b16be53f7",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"machine\": \"{{machineNamePaper}}\"\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/session",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "session"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity create session - paper #3",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "const machineName = pm.collectionVariables.get(\"machineNamePaper\") || \"paper-enigma\";",
              "pm.collectionVariables.set(\"machineNamePaper\", machineName);"
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "const jsonData = pm.response.json();",
              "pm.test(\"Session response has sessionID\", function () {",
              "    pm.expect(jsonData.sessionID).to.be.a(\"string\").and.not.empty;",
              "});",
              "pm.collectionVariables.set(\"sanityPaperSessionId3\", jsonData.sessionID);"
            ]
          }
        }
      ],
      "id": "540658e6-a6ca-4de7-8a89-8e218cbf999b",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"machine\": \"{{machineNamePaper}}\"\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/session",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "session"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity configure paper session #1",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "de71b372-f0a2-4f1f-8a89-0311a0cdc5d0",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "7d7936b8-f50b-4ffc-b1cc-d12fad3dd532",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "0a1667d0-78d4-4c9a-89e5-78d89513e854",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "text/plain"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"sessionID\": \"{{sanityPaperSessionId1}}\",\n  \"rotors\": [\n    {\n      \"rotorNumber\": 1,\n      \"rotorPosition\": \"O\"\n    },\n    {\n      \"rotorNumber\": 2,\n      \"rotorPosition\": \"D\"\n    },\n    {\n      \"rotorNumber\": 3,\n      \"rotorPosition\": \"X\"\n    }\n  ],\n  \"reflector\": \"I\",\n  \"plugs\": []\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/config/manual",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "config",
            "manual"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity configure paper session #2",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "90c53a76-c715-4414-8796-1f4f1099088e",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "73991764-bbcd-4f2b-81a3-62fac1550ce2",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "f96d50da-bedd-4c3a-a239-5806f2c8fb66",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "text/plain"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"sessionID\": \"{{sanityPaperSessionId2}}\",\n  \"rotors\": [\n    {\n      \"rotorNumber\": 1,\n      \"rotorPosition\": \"O\"\n    },\n    {\n      \"rotorNumber\": 2,\n      \"rotorPosition\": \"D\"\n    },\n    {\n      \"rotorNumber\": 3,\n      \"rotorPosition\": \"X\"\n    }\n  ],\n  \"reflector\": \"I\",\n  \"plugs\": []\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/config/manual",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "config",
            "manual"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity configure paper session #3",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "cc5b18bb-9564-4453-80c4-3f8d2ee5f3d1",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "8cfb4f55-9a6a-4fba-83e9-f47ed7cf72a1",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "f7b2d5a7-f1cb-40bd-8773-c91606814a9a",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "text/plain"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"sessionID\": \"{{sanityPaperSessionId3}}\",\n  \"rotors\": [\n    {\n      \"rotorNumber\": 1,\n      \"rotorPosition\": \"O\"\n    },\n    {\n      \"rotorNumber\": 2,\n      \"rotorPosition\": \"D\"\n    },\n    {\n      \"rotorNumber\": 3,\n      \"rotorPosition\": \"X\"\n    }\n  ],\n  \"reflector\": \"I\",\n  \"plugs\": []\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/enigma/config/manual",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "config",
            "manual"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity process paper session #1",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "2b79e073-4d89-4c55-93a7-c70eb685b091",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "const jsonData = pm.response.json();",
              "pm.test(\"Output matches expected\", function () {",
              "    console.log(jsonData.output);",
              "    pm.expect(jsonData.output).to.eql(\"APZTICDXRVMWQHBHU\");",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "5f7ed82a-0fc9-4fcd-b68a-9202500cf638",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "d8dc1a9c-985c-44f8-b39d-087789d7e87a",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/enigma/process?input=THERAINISDROPPING&sessionID={{sanityPaperSessionId1}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "process"
          ],
          "query": [
            {
              "key": "input",
              "value": "THERAINISDROPPING",
              "uuid": "afb87c38-7299-4280-9f52-b7d6c3bb40b3"
            },
            {
              "key": "sessionID",
              "value": "{{sanityPaperSessionId1}}",
              "uuid": "3635fbd9-d643-4f3d-b7b5-96854ca84a3b"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity process paper session #2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "const jsonData = pm.response.json();",
              "pm.test(\"Output matches expected\", function () {",
              "    pm.expect(jsonData.output).to.eql(\"DLTBBQVPQV\");",
              "});"
            ]
          }
        }
      ],
      "id": "36147629-704c-4faf-9fde-1229716ccff5",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/enigma/process?input=HELLOWORLD&sessionID={{sanityPaperSessionId2}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "process"
          ],
          "query": [
            {
              "key": "input",
              "value": "HELLOWORLD"
            },
            {
              "key": "sessionID",
              "value": "{{sanityPaperSessionId2}}"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity process paper session #3",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "02d93ed8-15a2-49c7-ba44-e479cb5ffb4f",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "const jsonData = pm.response.json();",
              "pm.test(\"Output matches expected\", function () {",
              "    pm.expect(jsonData.output).to.eql(\"QMJIDORMMYQBJDVSBR\");",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "38140751-98f4-48d1-9dff-ff094165ce8e",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "3e4e2c39-7311-4d90-82d0-976a84b1d930",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/enigma/process?input=ENIGMAMACHINEROCKS&sessionID={{sanityPaperSessionId3}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "process"
          ],
          "query": [
            {
              "key": "input",
              "value": "ENIGMAMACHINEROCKS",
              "uuid": "bfa4593f-c393-49a6-a11a-085a2c33f4d5"
            },
            {
              "key": "sessionID",
              "value": "{{sanityPaperSessionId3}}",
              "uuid": "e0a83639-8e57-4654-b5ca-47a7deb9b84e"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity history by paper session #1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ]
          }
        }
      ],
      "id": "e6596d0f-2284-4d49-9b81-318896f70f8e",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/enigma/history?sessionID={{sanityPaperSessionId1}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "history"
          ],
          "query": [
            {
              "key": "sessionID",
              "value": "{{sanityPaperSessionId1}}"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity history by paper machine",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ]
          }
        }
      ],
      "id": "1be59271-5f5c-4a0e-be06-0934651583d4",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/enigma/history?machineName={{machineNamePaper}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "history"
          ],
          "query": [
            {
              "key": "machineName",
              "value": "{{machineNamePaper}}"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity clear storage",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Status code is 204\", function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ]
          }
        }
      ],
      "id": "7847d676-cebe-4c14-b68e-8587c703d076",
      "request": {
        "method": "DELETE",
        "url": {
          "raw": "{{baseUrl}}/enigma/debug/storage",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "enigma",
            "debug",
            "storage"
          ]
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "id": "8cf659be-dc69-4aaf-9f5e-c1a29d666ab3",
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "id": "c807c1fc-8a60-4fa0-b98a-ec37d1c4aaf5",
      "key": "machineNamePaper",
      "value": "paper-enigma"
    },
    {
      "id": "c74c2a63-da24-4724-9ba2-e9653cdbeb8b",
      "key": "sanityPaperSessionId1",
      "value": ""
    },
    {
      "id": "483fb937-f14d-4055-8d28-65ee0ab96f9b",
      "key": "sanityPaperSessionId2",
      "value": ""
    },
    {
      "id": "bc3d92b0-f6bb-4b70-81f4-971f6167175f",
      "key": "sanityPaperSessionId3",
      "value": ""
    },
    {
      "id": "6d03abd9-7aed-4bf1-b73c-7106ee66a3ca",
      "key": "createdSessionId",
      "value": ""
    },
    {
      "id": "f0011ea7-5afa-4c97-91fd-f7dda295ad4c",
      "key": "machineNameSanity",
      "value": ""
    },
    {
      "id": "043c439f-7b45-4eeb-b501-ccf9366b877c",
      "key": "activeMachineName",
      "value": ""
    },
    {
      "id": "d2ea637f-b264-4b6d-abaf-bf007793d6fc",
      "key": "lastLoadError",
      "value": ""
    },
    {
      "id": "b8536916-593c-40e2-a0a8-6e88306469e6",
      "key": "activeSessionId",
      "value": ""
    },
    {
      "id": "4c76b2e3-263d-42b3-9c60-600ff1e0d6ec",
      "key": "createdSessionIdSmall",
      "value": ""
    },
    {
      "id": "738d7507-5d5e-448b-9db8-173cb8ef8bad",
      "key": "deletedSessionId",
      "value": ""
    },
    {
      "id": "ffb13da2-f766-4a61-92c9-5c8e67113ed2",
      "key": "historySessionId",
      "value": ""
    },
    {
      "id": "0ec16668-3262-4889-af25-95d06e479636",
      "key": "historyMachineName",
      "value": ""
    },
    {
      "id": "5f033b20-653a-426b-8e5a-c4d8490e624b",
      "key": "processInput",
      "value": ""
    },
    {
      "id": "3bdbde50-079e-4476-b932-4aab20f6ab2d",
      "key": "lastProcessOutput",
      "value": ""
    },
    {
      "id": "663e8587-4a0e-442c-b1e3-725ac9b79118",
      "key": "sanitySmallSessionId",
      "value": ""
    },
    {
      "id": "065c7e08-d08d-4beb-a816-de35e01b98ea",
      "key": "sanityPaperSessionId",
      "value": ""
    }
  ]
}
